<script>
  const nombre = document.getElementById("nombre");
  const precio = document.getElementById("precio");
  const descripcion = document.getElementById("descripcion");
  const código = document.getElementById("código");
  const foto = document.getElementById("foto");
  const stock = document.getElementById("stock");
  const tBody = document.getElementById("tableBooks");

  const addBook = (e) => {
    const book = {
      nombre: nombre.value,
      precio: precio.value,
      foto: foto.value,
      descripcion: descripcion.value,
      código: código.value,
      stock: stock.value,
    };
    socket.emit("newBook", book);
    return false;
  };
  const renderBookTable = (data) => {
    tBody.innerHTML = "";
    const tr = data
      .map((book) => {
        return `
  <tr>
    <td>${book.nombre}</td>
    <td>
      <img
        src="${book.foto}"
        alt="${book.nombre} img"
        style="max-height: 150px"
      />
    </td>
    <td>$${book.precio}</td>
    <td>${book.descripcion}</td>
    <td>${book.código}</td>
    <td>${book.stock}</td>
  </tr>
  `;
      })
      .join("");
    tBody.innerHTML = tr;
  };

  socket.on("requestBooks", (data) => {
    renderBookTable(data);
  });
</script>
